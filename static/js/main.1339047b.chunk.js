(this.webpackJsonpglimpse=this.webpackJsonpglimpse||[]).push([[0],{23:function(e,t,n){e.exports={container:"video-tile-big_container__1V7hm",image:"video-tile-big_image__2y0Ai"}},24:function(e,t,n){e.exports={container:"watch_container__1Ngqr",button:"watch_button__263pM",placeHolder:"watch_placeHolder__3m1b4"}},30:function(e,t,n){e.exports={container:"video-tile_container__INMTm"}},31:function(e,t,n){e.exports={input:"search_input__2xXNa",buttonCancel:"search_buttonCancel__3GS7z",buttonSearch:"search_buttonSearch__1QB2G"}},32:function(e,t,n){e.exports={container:"api-key_container__xwobL",active:"api-key_active__QG0Dw"}},37:function(e,t,n){e.exports={container:"home_container__3vpxv",header:"home_header__3cqQx"}},38:function(e,t,n){e.exports={select:"universal-select_select__JEGpZ"}},39:function(e,t,n){e.exports={header:"header_header__3wy06",apiComponent:"header_apiComponent__2lZmS"}},48:function(e,t,n){e.exports={container:"search_container__38NxV"}},78:function(e,t,n){},79:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var i,a=n(0),c=n.n(a),o=n(25),r=n.n(o),s=n(19),l=n(12),u=n(15),d=n(5),h=n.n(d),b=n(13);!function(e){e.YouTube="YouTube",e.Vimeo="Vimeo"}(i||(i={}));var j=n(18),p=n(28),v=n(29),f=n(21),O=n.n(f),m=n(16),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(p.a)(this,e),this.apiKey=t,this.baseUrl="https://www.googleapis.com/youtube/v3",this.videosUrl="".concat(this.baseUrl,"/videos?"),this.searchUrl="".concat(this.baseUrl,"/search?")}return Object(v.a)(e,[{key:"key",set:function(e){this.apiKey=e}},{key:"search",value:function(){var e=Object(b.a)(h.a.mark((function e(t,n,i){var a,c,o,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.stringify)({pageToken:i,q:n,type:"video",maxResults:t,key:this.apiKey}),e.next=3,O.a.get(this.searchUrl+a);case 3:return c=e.sent,o=c.data.items.map((function(e){return e.id.videoId})).join(","),e.next=7,this.getVideos(t,"",o);case 7:return r=e.sent,e.abrupt("return",Object(j.a)(Object(j.a)({},r),{},{nextPageToken:c.data.nextPageToken}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"getVideos",value:function(){var e=Object(b.a)(h.a.mark((function e(t,n,a){var c,o,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={maxResults:t,part:["snippet","statistics"],key:this.apiKey},a&&(c.id=a),n&&(c.chart=n),o=Object(m.stringify)(c),e.next=6,O.a.get(this.videosUrl+o);case 6:return r=e.sent,s=r.data.items.map((function(e){return{id:e.id,title:e.snippet.title,player:"https://www.youtube.com/embed/".concat(e.id),description:e.snippet.description,channelTitle:e.snippet.channelTitle,publishedAt:e.snippet.publishedAt,thumbnail:e.snippet.thumbnails.medium,statistics:{viewCount:e.statistics.viewCount,likeCount:e.statistics.likeCount,dislikeCount:e.statistics.dislikeCount}}})),e.abrupt("return",{data:s,origin:i.YouTube,nextPageToken:r.data.nextPageToken});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(p.a)(this,e),this.apiKey=t,this.baseUrl="https://api.vimeo.com/",this.searchUrl="".concat(this.baseUrl,"/videos?"),this.maxResultsSearch=5}return Object(v.a)(e,[{key:"key",set:function(e){this.apiKey=e}},{key:"search",value:function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a,c,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:1,a=Object(m.stringify)({page:n,query:t,per_page:this.maxResultsSearch,access_token:this.apiKey}),e.next=4,O.a.get(this.searchUrl+a);case 4:return c=e.sent,e.abrupt("return",{nextPageToken:n+1,origin:i.Vimeo,data:c.data.data.map((function(e){return{id:e.uri.replace("/videos/",""),title:e.name,player:"https://player.vimeo.com/video/".concat(e.uri.replace("/videos/","")),description:e.description||"",channelTitle:e.user.name,publishedAt:e.release_time,thumbnail:{height:e.pictures.sizes[3].height,width:e.pictures.sizes[3].width,url:e.pictures.sizes[3].link},statistics:{viewCount:0,likeCount:0,dislikeCount:0}}}))});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),w="apiKeys";function y(e,t){var n=window.localStorage.getItem(e),i=n?JSON.parse(n):[];i.unshift(t),window.localStorage.setItem(e,JSON.stringify(i))}function k(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):[]}function _(){var e=window.localStorage.getItem(w);return e?JSON.parse(e):{YouTube:"",Vimeo:""}}var T,C=new x(_().YouTube),S=new g(_().Vimeo),P={loading:!1,error:"",selectedVideoPlatform:i.YouTube,searchPhrase:"",fromHomepage:!0,searchResult:{origin:i.YouTube,nextPageToken:"",data:[]},popular:{origin:i.YouTube,nextPageToken:"",data:[]}},N=Object(s.b)("fetchPopularVideos",Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.getVideos(24,"mostPopular"));case 1:case"end":return e.stop()}}),e)})))),V=Object(s.b)("searchVideos",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,c=n.getState,o=c(),(null===t||void 0===t?void 0:t.nextPageToken)||a(U(c())),a(H(t.phrase)),e.abrupt("return",o.headerReducer.selectedVideoPlatform===i.YouTube?C.search(5,t.phrase,null===t||void 0===t?void 0:t.nextPageToken):S.search(t.phrase,null===t||void 0===t?void 0:t.nextPageToken));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Y=Object(s.c)({name:"header",initialState:P,reducers:{setVideoPlatform:function(e,t){e.selectedVideoPlatform=t.payload},clearStore:function(e,t){e.searchResult={nextPageToken:"",origin:i.YouTube,data:[]}},setSearchPhrase:function(e,t){e.searchPhrase=t.payload},setFromHomepage:function(e,t){e.fromHomepage=t.payload}},extraReducers:(T={},Object(l.a)(T,N.pending,(function(e){e.loading||(e.loading=!0)})),Object(l.a)(T,N.fulfilled,(function(e,t){e.loading&&(e.loading=!1),e.popular={nextPageToken:t.payload.nextPageToken,origin:i.YouTube,data:[].concat(Object(u.a)(e.searchResult.data),Object(u.a)(t.payload.data))}})),Object(l.a)(T,N.rejected,(function(e,t){e.loading&&(e.loading=!1),e.error=t.error})),Object(l.a)(T,V.pending,(function(e){e.loading||(e.loading=!0)})),Object(l.a)(T,V.fulfilled,(function(e,t){e.loading&&(e.loading=!1),e.searchResult={nextPageToken:t.payload.nextPageToken,origin:t.payload.origin,data:[].concat(Object(u.a)(e.searchResult.data),Object(u.a)(t.payload.data))}})),Object(l.a)(T,V.rejected,(function(e,t){e.loading&&(e.loading=!1),e.error=t.error})),T)}),R=Y.actions,I=R.setVideoPlatform,U=R.clearStore,H=R.setSearchPhrase,E=R.setFromHomepage,K=function(e){return e.headerReducer},M=Y.reducer,J=Object(s.a)({reducer:{headerReducer:M}}),q=n(7),D=(n(78),n(14)),F=n(3),A=(n(79),n(4)),L=n(1),z=function(e){var t=e.height,n=e.width;return Object(L.jsx)("div",{style:{width:"".concat(n,"px"),height:"".concat(t,"px"),background:"#e0e0e0",margin:"0",padding:"0"}})},B=n(30),G=n.n(B),Q=function(e){var t,n,i,c,o,r,s=e.videoData,l=Object(F.f)(),u=Object(a.useState)(!1),d=Object(A.a)(u,2),h=d[0],b=d[1];return Object(L.jsxs)("div",{className:G.a.container,"aria-label":"video tile",onClick:function(){return l.push("/watch/".concat(s.id))},children:[Object(L.jsx)("img",{src:null===s||void 0===s||null===(t=s.thumbnail)||void 0===t?void 0:t.url,alt:null===s||void 0===s?void 0:s.title,onLoad:function(){return b(!0)}}),!h&&Object(L.jsx)(z,{"aria-label":"video placeholder",height:180,width:320}),Object(L.jsx)("h1",{"aria-label":"title",children:null===s||void 0===s?void 0:s.title}),Object(L.jsx)("h2",{"aria-label":"channel name",children:null===s||void 0===s?void 0:s.channelTitle}),Object(L.jsx)("p",{"aria-label":"views",children:(null===s||void 0===s||null===(n=s.statistics)||void 0===n?void 0:n.viewCount)>1e6?"".concat(Math.round((null===s||void 0===s||null===(i=s.statistics)||void 0===i?void 0:i.viewCount)/1e5)/10,"M views"):(null===s||void 0===s||null===(c=s.statistics)||void 0===c?void 0:c.viewCount)>999?"".concat(Math.round((null===s||void 0===s||null===(o=s.statistics)||void 0===o?void 0:o.viewCount)/100)/10,"k views"):"".concat(null===s||void 0===s||null===(r=s.statistics)||void 0===r?void 0:r.viewCount," views")})]})},Z=function(){return Object(L.jsxs)("div",{className:G.a.container,children:[Object(L.jsx)(z,{height:180,width:320}),Object(L.jsx)("h1",{children:Object(L.jsx)(z,{height:25,width:320})}),Object(L.jsx)("h2",{children:Object(L.jsx)(z,{height:20,width:150})})]})},X=n(37),W=n.n(X),$=function(e){var t=Object(q.b)(),n=Object(q.c)(K),i=n.popular,c=n.loading;return Object(a.useEffect)((function(){t(E(!0))})),Object(L.jsxs)("div",{className:W.a.container,children:[Object(L.jsx)("h1",{className:W.a.header,children:"Trending now"}),Object(L.jsx)("main",{children:c?Object(u.a)(Array(24)).map((function(e,t){return Object(L.jsx)("div",{children:Object(L.jsx)(Z,{})},t)})):i.data.map((function(e,t){return Object(L.jsx)("div",{children:Object(L.jsx)(Q,{videoData:e})},t)}))})]})},ee=n(31),te=n.n(ee),ne=function(e){var t=e.onSubmit,n=e.history,i=e.limitHistory,c=Object(a.useState)(""),o=Object(A.a)(c,2),r=o[0],s=o[1];return Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.length&&t(r)},children:[Object(L.jsx)("input",{className:te.a.input,"aria-label":"search input",type:"text",name:"search",list:"history",placeholder:"Search",value:r,autoComplete:"off",onChange:function(e){return s(e.target.value)}}),Object(L.jsx)("datalist",{id:"history","aria-label":"search history list",children:n&&i&&n.slice(0,i).map((function(e,t){return Object(L.jsx)("option",{value:e},t)}))}),!!r.length&&Object(L.jsx)("input",{type:"button","aria-label":"clear button",className:te.a.buttonCancel,onClick:function(){return s("")}}),Object(L.jsx)("input",{type:"button","aria-label":"search button",className:te.a.buttonSearch,onClick:function(){return t(r)},disabled:!r.length})]})},ie=n(38),ae=n.n(ie),ce=function(e){var t=e.options,n=e.label,i=e.onSelect;return Object(L.jsx)("select",{className:ae.a.select,"aria-label":n,onChange:function(e){i(e.target.value)},children:!!t.length&&t.map((function(e,t){return Object(L.jsx)("option",{value:e,className:ae.a.option,children:e},t)}))})},oe=n(39),re=n.n(oe),se=n(32),le=n.n(se),ue=function(){var e=Object(a.useState)(i.YouTube),t=Object(A.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(_||""),r=Object(A.a)(o,2),s=r[0],u=r[1];Object(a.useEffect)((function(){var e;e=s,window.localStorage.setItem(w,JSON.stringify(e))}),[s]);return Object(L.jsxs)("div",{className:le.a.container,children:[Object(L.jsxs)("div",{children:[Object(L.jsx)("p",{className:n===i.YouTube?le.a.active:"",onClick:function(){return c(i.YouTube)},children:"YouTube"}),Object(L.jsx)("p",{className:n===i.Vimeo?le.a.active:"",onClick:function(){return c(i.Vimeo)},children:"Vimeo"})]}),Object(L.jsx)("div",{children:Object(L.jsx)("input",{"aria-label":"api key input",type:"text",name:"api key",placeholder:"Key",autoComplete:"off",autoCorrect:"false",value:n===(null===i||void 0===i?void 0:i.YouTube)?null===s||void 0===s?void 0:s.YouTube:n===(null===i||void 0===i?void 0:i.Vimeo)?null===s||void 0===s?void 0:s.Vimeo:"",onChange:function(e){u(Object(j.a)(Object(j.a)({},s),{},Object(l.a)({},n,e.target.value)))}})})]})},de=function(){var e=Object(F.f)(),t=Object(q.b)(),n=Object(q.c)(K).selectedVideoPlatform,c=Object(a.useState)(k(i.YouTube)),o=Object(A.a)(c,2),r=o[0],s=o[1],l=Object(a.useState)(!1),u=Object(A.a)(l,2),d=u[0],j=u[1];Object(a.useEffect)((function(){t(N())}),[]);var p=function(){var t=Object(b.a)(h.a.mark((function t(i){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,i),s(k(n)),e.push("/search?q=".concat(i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(L.jsxs)("div",{className:re.a.header,children:[Object(L.jsx)("h1",{onClick:function(){return e.push("/")},children:"glimpse"}),Object(L.jsxs)("div",{children:[Object(L.jsx)(ce,{options:Object.values(i),onSelect:function(e){t(I(e)),s(k(e))}}),Object(L.jsx)(ne,{onSubmit:p,history:r,limitHistory:10})]}),Object(L.jsx)("button",{onClick:function(){d&&window.location.reload(),j(!d)}}),d&&Object(L.jsx)("div",{className:re.a.apiComponent,children:Object(L.jsx)(ue,{})})]})},he=n(49),be=n(23),je=n.n(be),pe={margin:".5rem 0",padding:"0"},ve=function(){return Object(L.jsxs)("div",{className:je.a.container,children:[Object(L.jsx)("div",{children:Object(L.jsx)(z,{height:225,width:300})}),Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{style:pe,children:Object(L.jsx)(z,{height:40,width:500})}),Object(L.jsx)("div",{style:pe,children:Object(L.jsx)(z,{height:30,width:400})})]})]})},fe=function(e){var t,n,i,c,o,r,s,l=e.videoData,u=Object(F.f)(),d=Object(a.useState)(!1),h=Object(A.a)(d,2),b=h[0],j=h[1];return Object(L.jsxs)("div",{className:je.a.container,"aria-label":"video tile",onClick:function(){return u.push("/watch/".concat(l.id))},children:[Object(L.jsxs)("div",{className:je.a.image,children:[!b&&Object(L.jsx)(z,{"aria-label":"video placeholder",height:225,width:300}),Object(L.jsx)("img",{src:null===l||void 0===l||null===(t=l.thumbnail)||void 0===t?void 0:t.url,alt:null===l||void 0===l?void 0:l.title,onLoad:function(){return j(!0)}})]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{"aria-label":"title",children:null===l||void 0===l?void 0:l.title}),Object(L.jsxs)("p",{"aria-label":"views and channel",children:[!!(null===l||void 0===l||null===(n=l.statistics)||void 0===n?void 0:n.viewCount)&&((null===l||void 0===l||null===(i=l.statistics)||void 0===i?void 0:i.viewCount)>1e6?"".concat(Math.round((null===l||void 0===l||null===(c=l.statistics)||void 0===c?void 0:c.viewCount)/1e5)/10,"M views   \u2022  "):(null===l||void 0===l||null===(o=l.statistics)||void 0===o?void 0:o.viewCount)>999?"".concat(Math.round((null===l||void 0===l||null===(r=l.statistics)||void 0===r?void 0:r.viewCount)/100)/10,"k views  \u2022  "):"".concat(null===l||void 0===l||null===(s=l.statistics)||void 0===s?void 0:s.viewCount," views  \u2022  ")),"".concat(null===l||void 0===l?void 0:l.channelTitle)]}),Object(L.jsx)("p",{children:(null===l||void 0===l?void 0:l.description)&&(null===l||void 0===l?void 0:l.description.substring(0,120))+" ..."})]})]})},Oe=n(48),me=n.n(Oe),xe=function(e){var t=Object(q.b)(),n=Object(F.g)(),i=Object(q.c)(K),c=i.searchResult,o=i.searchPhrase,r=i.selectedVideoPlatform,s=i.loading,l=Object(he.a)(),d=Object(A.a)(l,2),h=d[0],b=d[1];return Object(a.useEffect)((function(){window.scrollTo(0,0);var e=m.parse(n.search)["?q"];e===o&&c.origin===r||t(V({phrase:e}))}),[n]),Object(a.useEffect)((function(){b&&t(V({phrase:m.parse(n.search)["?q"],nextPageToken:c.nextPageToken}))}),[b]),Object(a.useEffect)((function(){t(E(!1))})),Object(L.jsxs)("main",{className:me.a.container,"aria-label":"search view",children:[c.data.map((function(e,t){return Object(L.jsx)("div",{ref:c.data.length-1===t?h:null,children:Object(L.jsx)(fe,{videoData:e})},t)})),s&&Object(u.a)(Array(5)).map((function(e,t){return Object(L.jsx)("div",{children:Object(L.jsx)(ve,{})},t)}))]})},ge=n(24),we=n.n(ge),ye=function(e){var t,n,i,c,o,r,s=Object(q.b)(),l=Object(F.h)().id,u=Object(q.c)(K),d=u.searchResult,h=u.popular,b=u.fromHomepage,j=u.searchPhrase,p=Object(a.useState)(null),v=Object(A.a)(p,2),f=v[0],O=v[1];return Object(a.useEffect)((function(){var e,t;b?e=h.data.findIndex((function(e){return e.id===l})):(e=d.data.findIndex((function(e){return e.id===l})),(null===(t=d.data[e+1])||void 0===t?void 0:t.id)||s(V({phrase:j,nextPageToken:d.nextPageToken})));O(e)}),[l]),Object(L.jsxs)("main",{className:we.a.container,"aria-label":"watch view",children:[f>0?Object(L.jsx)(D.b,{to:"/watch/".concat(b?null===(t=h.data[f-1])||void 0===t?void 0:t.id:null===(n=d.data[f-1])||void 0===n?void 0:n.id),className:we.a.button}):Object(L.jsx)("div",{className:we.a.placeHolder}),Object(L.jsx)("div",{children:Object(L.jsx)("iframe",{width:"853",height:"480",src:b?null===(i=h.data[f])||void 0===i?void 0:i.player:null===d||void 0===d||null===(c=d.data[f])||void 0===c?void 0:c.player,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Video Player"})}),Object(L.jsx)(D.b,{to:"/watch/".concat(b?null===(o=h.data[f+1])||void 0===o?void 0:o.id:null===(r=d.data[f+1])||void 0===r?void 0:r.id),className:we.a.button})]})};function ke(){return Object(L.jsxs)(D.a,{basename:"/glimpse",children:[Object(L.jsx)("div",{style:{position:"sticky",top:"0"},children:Object(L.jsx)(de,{})}),Object(L.jsxs)(F.c,{children:[Object(L.jsx)(F.a,{exact:!0,path:"/",component:$}),Object(L.jsx)(F.a,{path:"/search",component:xe}),Object(L.jsx)(F.a,{path:"/watch/:id",component:ye}),Object(L.jsx)(F.a,{path:"*",children:Object(L.jsx)(_e,{})})]})]})}function _e(){return Object(L.jsx)("h2",{children:"404"})}var Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))};r.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(q.a,{store:J,children:Object(L.jsx)(ke,{})})}),document.getElementById("root")),Te()}},[[83,1,2]]]);
//# sourceMappingURL=main.1339047b.chunk.js.map